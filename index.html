<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Confidential Site</title>

<link rel="icon" type="image/png" href="valentine.png">

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

<style>
:root {
    /* Light Theme */
    --bg-gradient: linear-gradient(135deg, #ffc3a0 0%, #ffafbd 100%);
    --card-bg: rgba(255,255,255,0.90);
    --text-color: #5d4037;
    --highlight: #ff4d6d;
    --btn-grad: linear-gradient(45deg, #ff9a9e, #fad0c4);
    --btn-shadow: rgba(255,77,109,0.3);
    --input-bg: #fff0f3;
}

[data-theme="dark"] {
    /* Dark Theme */
    --bg-gradient: linear-gradient(135deg, #2b1055 0%, #7597de 100%);
    --card-bg: rgba(30,30,50,0.90);
    --text-color: #fff;
    --highlight: #ff80ab;
    --btn-grad: linear-gradient(45deg, #ff4081, #f50057);
    --btn-shadow: rgba(0,0,0,0.5);
    --input-bg: #4a4a6a;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0;
    font-family: 'Baloo 2', cursive;
    background: var(--bg-gradient);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transition: background 0.5s ease;
    position: relative;
}

/* --- BACKGROUND ANIMATION --- */
.floating-heart {
    position: fixed;
    top: 100vh;
    font-size: 24px;
    z-index: 0; /* Behind the card */
    pointer-events: none;
    animation: floatUp linear forwards;
    opacity: 0.7;
}

@keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
    100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
}

/* --- TOGGLE SWITCH --- */
.toggle-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 100;
}
.toggle-checkbox { display: none; }
.toggle-label {
    width: 60px;
    height: 30px;
    background: white;
    border-radius: 50px;
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 5px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.toggle-ball {
    width: 24px;
    height: 24px;
    background: #ff9a9e;
    border-radius: 50%;
    position: absolute;
    top: 3px;
    left: 3px;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.toggle-checkbox:checked + .toggle-label .toggle-ball {
    transform: translateX(30px);
    background: #5d3ebc;
}

/* --- UI CARD --- */
.card {
    background: var(--card-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 30px;
    padding: 30px 20px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    transition: height 0.3s ease;
    position: relative;
    z-index: 10;
}

h1 { font-family: 'Fredoka', sans-serif; color: var(--highlight); margin: 0 0 15px 0; }
p { color: var(--text-color); font-size: 1.1rem; font-weight: 500; margin-bottom: 20px; }

.gif-container {
    width: 100%;
    height: 200px;
    border-radius: 20px;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(255,255,255,0.4);
    margin-bottom: 20px;
}
.gif-img { height: 100%; object-fit: contain; }

.hidden { display: none; }
.fade-in { animation: fadeIn 0.5s ease-out forwards; }
@keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }

button {
    border: none;
    padding: 12px 30px;
    border-radius: 50px;
    cursor: pointer;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    font-weight: 600;
}

.btn-yes {
    background: var(--btn-grad);
    color: #fff;
    box-shadow: 0 5px 15px var(--btn-shadow);
    transition: transform 0.2s;
}
.btn-yes:active { transform: scale(0.95); }

.btn-no {
    background: #e0e0e0;
    color: #666;
    position: absolute;
    transition: all 0.1s ease;
    z-index: 50;
}

/* --- FORM INPUT --- */
.custom-input {
    width: 80%;
    padding: 12px;
    border-radius: 20px;
    border: 2px solid var(--highlight);
    background: var(--input-bg);
    color: var(--text-color);
    font-family: 'Baloo 2', cursive;
    font-size: 1rem;
    text-align: center;
    margin-bottom: 20px;
    outline: none;
}

.dots { display: flex; justify-content: center; gap: 5px; margin-bottom: 10px; }
.dot { width: 8px; height: 8px; border-radius: 50%; background: #ccc; }
.dot.active { background: var(--highlight); transform: scale(1.2); }

#funny {
    min-height: 20px;
    margin-top: 15px;
    color: var(--highlight);
    font-weight: bold;
    font-size: 0.9rem;
}
</style>
</head>

<body>

<div class="toggle-wrapper">
    <input type="checkbox" class="toggle-checkbox" id="themeToggle" onclick="toggleTheme()">
    <label for="themeToggle" class="toggle-label">
        <span style="font-size: 12px; margin-left: 5px;">‚òÄÔ∏è</span>
        <span style="font-size: 12px; margin-right: 5px;">üåô</span>
        <div class="toggle-ball"></div>
    </label>
</div>

<div class="card">

    <div id="step1" class="fade-in">
        <h1>Hi Mr. Chintu üëã</h1>
        <div class="gif-container">
            <img class="gif-img" src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHU1YTQ4NGxvN2lmcnA4ZDRubWt0cXZyNHVvaTBnd3hyd2ZyMjc0YiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/SUtKUblVAvwMkTvaiT/giphy.gif">
        </div>
        <p>I have a very serious question...</p>
        <button class="btn-yes" onclick="nextStep(2)">Yes? üëÄ</button>
    </div>

    <div id="step2" class="hidden">
        <h1>Wait...</h1>
        <div class="gif-container">
            <img class="gif-img" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdHJnMHY4MzQ0YWNremNxcDRpNGhocG9yNDdta2I2aHc3b3lyZGhlbiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/dtBi0s3hndz7q/giphy.gif">
        </div>
        <p>I need to tell you a story first.</p>
        <button class="btn-yes" onclick="startStory()">Tell me! ü§®</button>
    </div>

    <div id="step3" class="hidden">
        <div class="dots" id="dots"></div>
        <h1 id="s-title">Title</h1>
        <div class="gif-container">
            <img id="s-img" class="gif-img">
        </div>
        <p id="s-desc">Description</p>
        <button class="btn-yes" style="width:100%" id="story-btn" onclick="nextSlide()">Next ‚û°Ô∏è</button>
    </div>

    <div id="step-quiz" class="hidden">
        <h1>Quick Question!</h1>
        <div class="gif-container">
            <img class="gif-img" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExN3J2Z3E0bnZ4Y3V5a3J6Y2F4Y3Z5a3J6Y2F4Y3Z5a3J6Y2F4YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l3q2K5jinAlChoCLS/giphy.gif">
        </div>
        <p>How much do you think Mookie liked Pookie?</p>
        <input type="text" id="user-answer" class="custom-input" placeholder="Type here (e.g. Infinity)">
        <button class="btn-yes" onclick="submitQuiz()">Submit ‚ú®</button>
    </div>

    <div id="step4" class="hidden">
        <h1>So Vishu...</h1>
        <div class="gif-container">
            <img id="main-gif" class="gif-img" src="https://media.giphy.com/media/Vz58J8shFW6vm/giphy.gif">
        </div>
        <p>Let's not be Pookie & Mookie.<br>Will you be my Valentine?</p>
        
        <div style="position: relative; display: flex; justify-content: center; gap: 20px; height: 60px;">
            <button class="btn-yes" onclick="accept()">YES! ‚ù§Ô∏è</button>
            <button id="noBtn" class="btn-no" onmouseover="runAway()" onclick="runAway()">No</button>
        </div>
        
        <p id="funny"></p>
    </div>

    <div id="step5" class="hidden">
        <h1>YAYYY! ü•≥</h1>
        <div class="gif-container">
            <img class="gif-img" src="https://media.giphy.com/media/TdfyKrN7HGTIY/giphy.gif">
        </div>
        <p>Best decision ever! <br> See you on the 14th or 15th or idk forever?! xoxo</p>
    </div>

</div>

<script>
    // --- 1. PERSISTENT THEME LOGIC ---
    // Check localStorage on load
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.body.setAttribute('data-theme', savedTheme);
    // Sync the checkbox state
    if (savedTheme === 'dark') {
        document.getElementById('themeToggle').checked = true;
    }

    function toggleTheme(){
        const body = document.body;
        const isDark = body.getAttribute('data-theme') === 'dark';
        const newTheme = isDark ? 'light' : 'dark';
        
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    }

    // --- 2. BACKGROUND ANIMATION ---
    function createHeart() {
        const heart = document.createElement('div');
        heart.classList.add('floating-heart');
        const emojis = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üíï', 'üíó'];
        heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.fontSize = Math.random() * 20 + 10 + 'px';
        heart.style.animationDuration = Math.random() * 3 + 4 + 's';
        document.body.appendChild(heart);
        setTimeout(() => { heart.remove() }, 7000);
    }
    setInterval(createHeart, 400);

    // --- 3. STORY DATA WITH CUSTOM BUTTON TEXT ---
    const slides = [
        {
            title: "Once upon a time...",
            img: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcnJld3A5OWQ0cW40bXhkbGM0MjVxaHQwbzA3eDhzYnd6dXd5dDR2ZSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/7faU8GC6Zp0WI/giphy.gif",
            desc: "There were Mookie Prasad and Pookie Prasad.",
            btn: "Then what? üëÄ"
        },
        {
            title: "The Crush",
            img: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWRzdjluZjByajJkbTkybHN5MTJ0aHNleWZob21lajJkeWYyNTg2ZSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/PFo2HrqCjC0bm/giphy.gif",
            desc: "Mookie liked Pookie a lot. Like, a LOTTTTTTTTTTTT.",
            btn: "How much? ü§î" // This triggers the input slide
        },
        {
            title: "The Preparation",
            img: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3a3gxM3FpYXZlbDBleTJ4cTZia3Uxa3R5NjNxcGxtMTNzMnppN3B1NCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/v6ZrbutUlkhCW6jKHF/giphy.gif",
            desc: "Mookie practiced her proposal in the mirror 100 times. She was shaking.",
            btn: "Aww... ü•∫"
        },
        {
            title: "The Question",
            img: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3d4MzJ6aG16aG16aG16aG16aG16aG16aG16aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/lTQF0ODLLjhza/giphy.gif",
            desc: "Finally, she asked: 'Pookie, will you be my Valentine?'",
            btn: "And then?? üò®"
        },
        {
            title: "The Audacity",
            img: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMGFnZDZ5bzd5Y3ZibTB5MXA4MTA4eHU2dXA0cjRnaXJ2OWxrZHpvciZlcD12MV9naWZzX3NlYXJjaCZjdD1n/lxxOGaDRk4f7R5TkBd/giphy.gif",
            desc: "Pookie actually paused to think about it... (Can you believe him?)",
            btn: "No way... üò§"
        },
        {
            title: "The Rejection",
            img: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXV4MGJ4MDY3bDRpMWdxczZyZWtzbGpleXgwaTl6dXRoOGRkZ2ZsMiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/1zSz5MVw4zKg0/giphy.gif",
            desc: "Then Pookie said NO. The biggest mistake of his life.",
            btn: "The idiot! üò°"
        },
        {
            title: "The Heartbreak",
            img: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3MzJhdDlmeGhjejhpZzVnOTBneW1laGJncmRwOHplYmd4M3V5MXdpMyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ar71Hyi0ZKejXzMoNs/giphy.gif",
            desc: "Mookie cried enough tears to fill an ocean.",
            btn: "Poor Mookie üò≠"
        },
        {
            title: "THE CHAOS",
            img: "https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3d4MzJ6aG16aG16aG16aG16aG16aG16aG16aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/yr7n0u3qzO9nG/giphy.gif",
            desc: "Sadness turned to RAGE. Mookie set the world on fire.",
            btn: "Omg üíÄ"
        },
        {
            title: "The Aftermath",
            img: "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3d4MzJ6aG16aG16aG16aG16aG16aG16aG16aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/aTf4PONtSYB1e/giphy.gif",
            desc: "Now Pookie is just a ghost floating in the void.",
            btn: "Spooky... üëª"
        },
        {
            title: "The Warning",
            img: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXQ3b2szcDllczN3N2wzM3o5cHdxMnF3ampkMWVlMzViaGRsdHA4YSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/PrTCHhXyn6ZtNF5nly/giphy.gif",
            desc: "So Vishu... DON'T be like Pookie.",
            btn: "I promise! ü§û"
        }
    ];

    let i=0;

    function nextStep(n){
        document.querySelectorAll(".card>div").forEach(d=>{
            d.classList.add("hidden");
            d.classList.remove("fade-in");
        });
        const el = document.getElementById("step"+n);
        el.classList.remove("hidden");
        void el.offsetWidth; // Trigger reflow
        el.classList.add("fade-in");
    }

    function startStory(){
        nextStep(3);
        const dots=document.getElementById("dots");
        dots.innerHTML="";
        slides.forEach((_,x)=>{
            const d=document.createElement("div");
            d.className="dot"+(x===0?" active":"");
            dots.appendChild(d);
        });
        showSlide(0);
    }

    function showSlide(n){
        document.getElementById("s-title").innerText=slides[n].title;
        document.getElementById("s-img").src=slides[n].img;
        document.getElementById("s-desc").innerText=slides[n].desc;
        // Update the button text!
        document.getElementById("story-btn").innerText=slides[n].btn;
        
        document.querySelectorAll(".dot").forEach((d,x)=>d.classList.toggle("active",x===n));
        
        // Preload next image
        if(slides[n+1]){ const p=new Image(); p.src=slides[n+1].img; }
    }

    function nextSlide(){
        // INTERCEPT LOGIC: If we are at slide index 1 (The Crush), stop and show input
        if(i === 1) {
            document.getElementById("step3").classList.add("hidden");
            const quiz = document.getElementById("step-quiz");
            quiz.classList.remove("hidden");
            quiz.classList.add("fade-in");
            return;
        }

        i++;
        if(i<slides.length){
            showSlide(i);
        } else {
            nextStep(4);
        }
    }

    function submitQuiz() {
        const ans = document.getElementById("user-answer").value;
        if(ans.trim() === "") {
            alert("Tell me how much! üò†");
            return;
        }
        // Go back to story
        document.getElementById("step-quiz").classList.add("hidden");
        document.getElementById("step3").classList.remove("hidden");
        
        // Move to next slide manually
        i++; 
        showSlide(i);
    }

    function accept(){
        nextStep(5);
        document.body.style.background = "linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)";
    }

    const phrases=["Click YES!", "Vishu NO!", "Don't be Pookie!", "Wrong button!", "Are you sure??", "Look at Snoopy!"];
    
    function runAway(){
        const b = document.getElementById("noBtn");
        b.style.position = "fixed"; 
        const x = Math.random() * (window.innerWidth - 100);
        const y = Math.random() * (window.innerHeight - 50);
        b.style.left = x + "px";
        b.style.top = y + "px";
        document.getElementById("funny").innerText = phrases[Math.floor(Math.random()*phrases.length)];
        document.getElementById("main-gif").src = "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3a29vY2hldmttZWo0aDBqYm9uM3pxZXFnOHNubTIwYXlnbHQ3NGpwcSZlcD12MV9naWZzX3JlbGF0ZWQmY3Q9Zw/YLPOIP1jPu1N87yemm/giphy.gif";
    }
</script>
</body>
</html>
